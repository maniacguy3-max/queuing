<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard - Appointments</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">

  <!-- Navbar -->
  <header class="bg-blue-900 text-white shadow-md">
    <div class="container mx-auto flex justify-between items-center p-4">
      <h1 class="text-xl font-bold">CITY HEALTH CLINIC - Admin Dashboard</h1>
    </div>
  </header>

  <!-- Main Dashboard -->
  <div class="container mx-auto px-6 py-10">
    <h2 class="text-3xl font-bold text-blue-900 text-center mb-6">Appointment Records</h2>

    <!-- Date Picker -->
    <div class="flex justify-center mb-6">
      <label class="block">
        <span class="text-gray-700 font-semibold">Filter by Date:</span>
        <input type="date" id="adminDate" class="ml-2 p-2 border rounded" onchange="loadAppointments()">
      </label>
    </div>

    <!-- Appointment List -->
    <div id="appointmentsList" class="bg-white rounded-lg shadow-lg p-6 max-h-[500px] overflow-y-auto">
      <p class="text-gray-600">No appointments to display.</p>
    </div>
  </div>

  <script>
    // Load data from localStorage
    function getAppointmentsLog() {
      return JSON.parse(localStorage.getItem("appointmentsLog")) || {};
    }

    function loadAppointments() {
      const date = document.getElementById("adminDate").value;
      const listDiv = document.getElementById("appointmentsList");
      const appointmentsLog = getAppointmentsLog();

      listDiv.innerHTML = "";

      if (!date || !appointmentsLog[date] || appointmentsLog[date].length === 0) {
        listDiv.innerHTML = "<p class='text-gray-600'>No appointments for this date.</p>";
        return;
      }

      appointmentsLog[date].forEach(app => {
        const item = document.createElement("div");
        item.className = "border-b py-4";
        item.innerHTML = `
          <p><b>Queue:</b> ${app.queue}</p>
          <p><b>Name:</b> ${app.firstName} ${app.middleName} ${app.lastName}</p>
          <p><b>Age:</b> ${app.age}, <b>Sex:</b> ${app.sex}</p>
          <p><b>Phone:</b> ${app.phone}</p>
          <p><b>Email:</b> ${app.email || "N/A"}</p>
          <p><b>Symptoms:</b> ${app.symptomsCategory} (${app.details || "N/A"})</p>
          <p><b>Time:</b> ${app.time}</p>
        `;
        listDiv.appendChild(item);
      });
    }

    // Show todayâ€™s appointments by default
    window.onload = function() {
      const today = new Date().toISOString().split("T")[0];
      document.getElementById("adminDate").value = today;
      loadAppointments();
    }
  </script>
</body>
</html>
